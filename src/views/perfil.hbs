<!--NAVBAR-->
<nav class="navbar navbar-expand-lg navbar-dark nav-bar">
    <a class="navbar-brand" href="/">
        <img src="/img/regsol.png" width="180" height="65" />
    </a>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="inicioID();">Inicio</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="regID();">Registrar</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="gesID();">Gestionar</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="infoID();">Informe</a>
            </li>
        </ul>
    </div>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto"></ul>
        <form class="form-inline my-2 my-lg-0">
            <ul class="navbar-nav mr-auto">

                <div class="containerProfile">
                    <img class="profileIMG" src="/img/user_bg.png" />
                    <div id="userProfile" class="centered"></div>
                </div>

                <li class="nav-item dropdown active">
                    <a class="nav-link dropdown-toggle" href="#" id="userlink" role="button" data-toggle="dropdown"
                        aria-expanded="false">
                        Usuario
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="#" onclick="perfilID();">Perfil</a>
                    </div>
                </li>

                <li class="nav-item mx-1">
                    <a id="signoutlink" class="nav-link" href="">Cerrar Sesión</a>
                </li>
            </ul>
        </form>
    </div>
    </div>
</nav>

<form action="/edit-user" id="userForm" method="POST">

<!--DATA SERVICE-->
<input name="UIDSess" style="display: none;" value="{{uidUser}}">

    <!--DATA SOLICITUDES -->
    <div class="rowregsol">
        <div class="mt-3 ml-3 areaform">

            <p style="color: #ffffff;" class="col-md-6">
                <i class="fa fa-user" style="color: #d41b3b;"></i>&nbsp;<b>PERFIL DE USUARIO</b>
            </p>

            <div class="row rowges">

                <div class="areaforminicio col-md-4">
                    <p class="mt-3">
                        <b>Editar Usuario</b>
                    </p>
                    <hr>

                    <input type="text" minlength="5" maxlength="80" placeholder="Nombre y Apellido" id="nameInp"
                        name="username" class="form-control" value="{{nameUser}}" required/>
                        <label id="labenameInp" style="color: #d41b3b; font-size: 12px;" class="displayNone" for="nameInp">*Nombre incorrecto, no ingresar números.</label>

                    <div class="input-group mb-3 mt-3">
                        <div class="input-group-prepend">
                            <label class="input-group-text" for="areaInp">Área</label>
                        </div>
                        <select type="text" class="custom-select" id="areaInp" name="area" required>
                            <option value="{{areaUser}}" selected>{{areaUser}}</option>
                            {{#each areas}}
                            <option value="{{nombre}}">{{nombre}}</option>
                            {{/each}}
                        </select>
                    </div>

                    <!--AREA SI ES GERENCIA-->
                    <div id="subareas" class="input-group mb-3 displayNone">
                        <div class="input-group-prepend">
                        <label class="input-group-text" for="subareaInp" required>De</label>
                        </div>
                        <select type="text" class="custom-select" id="subareaInp" name="subarea" required>
                            <option value="{{subarea}}" selected>{{subarea}}</option>
                            {{#each areasgerencias}}
                            <option value="{{nombre}}">{{nombre}}</option>
                            {{/each}}
                        </select>
                    </div>

                    <hr>
                    <input type="text" maxlength="11" placeholder="Rut (12345678-9)" id="rutInp" name="rut"
                        class="form-control mb-3" value="{{rutUser}}" disabled />
                    <input type="text" maxlength="80" placeholder="Correo Electrónico" id="emailInp" name="email"
                        class="form-control mb-3" value="{{emailUser}}" disabled />
                </div>
            </div>
            <div class="rowreg areaformtrans ml-0">
                <div class="col-md-6">
                    <p>*Para visualizar los cambios debes reconectarte al sistema.</p>
                    <button type="submit" id="btnGuardarSol" class="btn btn-primary float-left">
                        <i class="fa fa-floppy-o"></i>&nbsp; Guardar
                    </button>
                    <button type="button" id="btnCancelSol" class="btn btn-primary ml-3 float-left">
                        <i class="fa fa-times-circle-o"></i>&nbsp; Cancelar
                    </button>
                </div>
            </div>

        </div>
    </div>

</form>

<!--SCRIPTS-->
<script type="module" src="/./js/perfil.js"></script>

<script>
    const firebase = sessionStorage.getItem("user");
    const userlog = (JSON.parse(firebase));
    const uid = userlog.uid;

    function perfilID() {
        window.location.href = "/perfil/" + uid;
    }
    function regID() {
        window.location.href = "/reg/" + uid + "/" + "data";
    }
    function gesID() {
        window.location.href = "/ges/" + uid + "/" + "data";
    }
    function inicioID() {
        window.location.href = "/inicio/" + uid;
    }
    function infoID() {
        window.location.href = "/info/" + uid;
    }
</script>