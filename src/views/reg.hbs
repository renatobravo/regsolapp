<!--NAVBAR-->
<nav class="navbar navbar-expand-lg navbar-dark nav-bar">
    <a class="navbar-brand" href="/">
        <img src="/img/regsol.png" width="180" height="65" />
    </a>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="inicioID();">Inicio</a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="#" onclick="regID();">Registrar</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="gesID();">Gestionar</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="infoID();">Informe</a>
            </li>
        </ul>
    </div>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto"></ul>
        <form class="form-inline my-2 my-lg-0">
            <ul class="navbar-nav mr-auto">
                        <div class="containerProfile">
            <img class="profileIMG" src="/img/user_bg.png" />
            <div id="userProfile" class="centered"></div>
        </div>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="userlink" role="button" data-toggle="dropdown">
                        Usuario
                    </a>
                    <div class="dropdown-menu">
                                    <a class="dropdown-item" href="#" onclick="perfilID();">Perfil</a>
                    </div>
                </li>
                <li class="nav-item mx-1">
                    <a id="signoutlink" class="nav-link" href="">Cerrar Sesión</a>
                </li>
            </ul>
        </form>
    </div>
    </div>
</nav>

<!--VALIDACION UPDATE-->
<div id="alertUpdate" style="text-align: center" class="alert alert-info displayNone">
  <button type="button" class="close" data-dismiss="alert">&times;</button>
  Solicitud <strong>Actualizada</strong>
</div>

<!--VALIDACION CREATE-->
<div id="alertCreate" style="text-align: center" class="alert alert-success displayNone">
  <button type="button" class="close" data-dismiss="alert">&times;</button>
  Solicitud <strong>Creada</strong>
</div>

<!--VALIDACION CANCEL-->
<div  id="alertCancel" style="text-align: center" class="alert alert-warning displayNone">
  <button type="button" class="close" data-dismiss="alert">&times;</button>
  Solicitud <strong>Cerrada</strong>
</div>

<!-- MODAL AYUDA -->
<div class="modal fade" id="ayudaModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="gridModalLabel">Ayuda en el Registro</h5>
                <button type="button" class="close" data-dismiss="modal"><span>×</span></button>
            </div>
            <div class="modal-body">
                <div class="container-fluid bd-example-row">
                    <p class="row text-justify font-weight-light">
                        {{AyudaReg}}
                    </p>
                    <br>
                    <div class="row float-right">
                        <a class="navbar-brand">
                            <img src="/img/regsol.png" width="140px" height="50,5px" />
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--DIV-AREA 1-->
<div class="rowregsol">
    <div class="mt-3 ml-3 areaform">

        <a type="button" id="btnAyudaSol" class="btn btn-primary ml-2 float-right" data-toggle="modal" title="Ayuda"
            data-target="#ayudaModal">
            <i class="fa fa-question-circle"></i>
        </a>

        <a type="button" id="btnNuevaSol" class="btn btn-primary ml-1 float-right" onclick="regsolID();"
            title="Crear">Nueva <i class="fa fa-plus"></i>
        </a>

        <p style="color: #ffffff;" class="col-md-6 mt-2">
            <b>REGISTRO DE SOLICITUDES</b>
        </p>

    </div>
</div>

<div class="rowregsol">
    <div class="mt-3 ml-3 areaform">
        <p  style="color: #ffffff;" class="col-6 mt-2">
            <b>MIS SOLICITUDES ABIERTAS</b>
        </p>
            <div class="rowges">
            <div class="areaformges">
            <div class="table-wrapper-scroll-y my-custom-scrollbar-reg table-responsive-sm">

                    <table class="table table-condensed tableFixHead">
                        <thead style="background-color:rgb(255, 255, 255)">
                            <tr>
                                <th class="col-xs-2">ID</th>
                                <th class="col-xs-2">ESTADO</th>
                                <th class="col-xs-2">FECHA</th>
                                <th class="col-xs-2">TIPO</th>
                                <th class="col-xs-2">DIRIGIDA</th>
                                <th class="col-xs-5">ASUNTO</th>
                                <th class="col-xs-2">OPCIONES</th>
                            </tr>
                        </thead>
                        {{#each SolReg}}
                        <tbody>
                            <tr>
                                <th class="col-xs-2" scope="row">{{inpIDSol}}</th>
                                <td class="col-xs-2">{{inpEstadoSol}}</td>
                                <td class="col-xs-2">{{inpFechaSol}}</td>
                                <td class="col-xs-2">{{inpTipoSol}}</td>
                                <td class="col-xs-5">{{inpNomRecepSol}}</td>
                                <td class="col-xs-2">{{inpAsunSol}}</td>
                                <td class="col-xs-2">
                                    <a id="updateButton" class="btn-sm btn-dark1 text-white" href="/reg/edit/{{uidSol}}"><i
                                            class="fa fa-pencil-square-o" title="Editar" type="submit"></i></a>&nbsp;
                                    <a id="deleteButton" class="btn-sm btn-dark1 text-white" href='javascript:
                            swal("Advertencia!", "¿Desea cerrar la solicitud?", "", {
                            buttons: { cancel: "Volver", Si: true },
                            }).then((value) => {
                            switch (value) {
                                case "Si":
                                    window.location.href = "/reg/cancel/{{uidSol}}/{{inpUIDuser}}";
                            }
                            });' class="btn btn-danger"><i class="fa fa-window-close" title="Cancelar"></i></a>
                                </td>
                            </tr>
                        </tbody>
                        {{/each}}
                    </table>

            </div>
            </div>
            </div>

    </div>
</div>



<!--SCRIPTS-->
<script type="module" src="/./js/reg.js"></script>

<script>
    function regsolID() {
        var firebase = sessionStorage.getItem("user");
        var userlog = (JSON.parse(firebase));
        var uid = userlog.uid
        window.location.href = "/regsol/" + uid;
    }
    const firebase = sessionStorage.getItem("user");
    const userlog = (JSON.parse(firebase));
    const uid = userlog.uid;

    function perfilID() {
        window.location.href = "/perfil/" + uid;
    }
    function regID() {
        window.location.href = "/reg/" + uid + "/" + "data";
    }
    function gesID() {
        window.location.href = "/ges/" + uid + "/" + "data";
    }
    function inicioID() {
        window.location.href = "/inicio/" + uid;
    }
    function deleteSol() {
        swal("Un paso más!", "¿Desea crear la solicitud?", "success", {
            buttons: { cancel: "Volver", Si: true },
        }).then((value) => {
            switch (value) {
                case "Si":
                    return true;
            }
        });
    }
    function infoID() {
        window.location.href = "/info/" + uid;
    }
</script>